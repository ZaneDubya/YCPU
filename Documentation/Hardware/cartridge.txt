
                        YPSILONTECH's CRW600
                      A data cartridge drive for
                        all your storage needs

    Shipping manifests. Asteroid field navigation maps. The latest software. At
    YPSILONTECH, we know you need storage that is portable and reliable. That's
    why you need the CRW600 - the revolutionary solid state storage device that
    is readable, writable, and semi-hardened against anomolous bit flips.

=== Drive hardware =============================================================

    At the heart of the CRW600 is an electromechanical mechanism which can read
    and write data to and from a compatible cartridge. The key components of the
    EM device include a spindle motor, read/write heads, head actuator assembly,
    and an interface for data and control signals. The spindle motor accesses
    the cartridge medium at a constant angular velocity, typically 600 RPM
    (10 revolutions per second). The read/write heads, mounted on the head
    actuator assembly, are positioned close to the cartridge medium, with the
    assembly driven by a stepper motor or a voice coil actuator to enable
    precise movement across the disk surface.

=== Cartridges =================================================================

    A standardized cartridge is composed of a 90.0 mm Ã— 94.0 mm rectangular,
    rigid plastic casing with a central aperture that exposes the cartridge
    medium. The geomtry of the medium is that of a two dimensional disc 90 mm
    in diameter. The medium is composed of a highly oriented polymer film coated
    with a high-coercivity magnetic material. A protective anti-static liner
    between the casing and medium minimizes friction and dust accumulation.
    Additionally, the casing incorporates a spring-loaded metal slider, which
    retracts to expose the medium when inserted into the CRW600 drive.

    The magnetic medium can be described as containing a number of cylinders,
    with each cylinder composed of 256 sectors, each sector comprised of 512
    bytes.
    
    The programmer must query the drive when a cartridge is inserted to determine
    how many cylinders the cartridge contains and thus the total storage capacity
    of the cartridge. For example, a cartridge with 128 cylinders will have a
    total storage of 128 cylinders x 256 sectors x 512 bytes = 16,777,216 bytes.

=== Interfacing details ========================================================

    DeviceType:     0x0003 (Storage, removable)
    ManufacturerID: 0x0000 (Ypsilon)
    DeviceID:       0x0200
    DeviceRevision: 0x000A
    
    HWQ $02 Message:
    
    R1      Message
    $00     Query state. R0 is set to state bitfield:
            fedcba98 76543210
            eib..... .....pwm
            e = error code nonzero.
            i = interrupt enabled.
            b = drive is busy.
            p = drive motor engaged and ready.
            w = cartridge is write protected.
            m = cartridge present in drive.
            
            R2 is used to set/disable interrupt. If R2 is 0, interrupt is
            disabled. If R2 is nonzero, interrupt is enabled. While interrupt
            is enabled, drive will cause hardware interrupt when:
            * Error bit goes from 0 -> 1,
            * Drive motor ready bit goes from 0 -> 1,
            * Busy bit goes from 1 -> 0, or 
            * MediaPresent bit changes.
            
    $01     Query error code. Last error code is returned in R0. Error status
            cleared on read.
            0x0000 ERROR_NONE       No error since last query.
            0x0001 ERROR_BUSY       Attempted read/write while drive busy.
            0x0002 ERROR_NO_MEDIA   Attempted read/write without cartridge present.
            0x0003 ERROR_PROTECTED  Attempted write to write protected cartridge.
            0x0004 ERROR_EJECT      Cartridge removed while reading or writing.
            0x0005 ERROR_BAD_SECTOR Requested sector is bad, data on it is lost.
            0xffff ERROR_BROKEN     Attempted read/write failed due to hardware.
    
    $02     Engage drive motor. Accuates the physical mechanism which allows the
            cartridge to access data from the cartridge medium. It takes
            approximately 25 ms for the drive to reach the angular velocity necessary
            to access the medium. When the drive motor has reached the appropriate
            angular speed, the 'drive motor ready' bit will be set.
            
            The drive motor will be automatically disengaged approximately 10 
            seconds after the last command to the drive has completed. It takes 
            approximately 75 ms to spin down the motor. The 'drive motor ready'
            bit will be cleared immediately when the drive motor begins to spin
            down.
    
    $03     Seek to cylinder. Move cartridge reader head to cylinder in R0.
            The drive will immediately set 'drive busy' in its state bitfield.
            When the reader head has moved to the appropriate cylinder, the 'drive
            busy' bit will be cleared. If the reader head is already located 
            on the correct cylinder, this operation will end after approximately
            0.5ms. Otherwise, a period of 1-32 ms of seek time will transpire before
            the 'drive busy' bit is cleared.
    
    $04     Read sector. Begin read of a sector of index R2 on the current cylinder.
            The contents of the sector will be read to memory address ES:R3.
            R0 is set to 0 if reading is possible and started, else set to 1 and
            internal error code set. Reading is only possible if media is present,
            and the drive is not busy. If reading is possible and no errors are
            encountered, the drive will complete reading the sector in 1-101 ms.
            When the read is in progress, the 'drive busy' bit will be set.
            When the read is complete, the 'drive busy' will be cleared.
            
    $05     Write sector. Begin write of data in memory to a sector of index R2
            on the current cylinder. R0 is set to 0 if writing is possible and
            started, else set to 1 and internal error code set. Writing is only
            possible if media is present, the media is not write-protected, and
            the drive is not busy. If writing is possible and no errors are
            encountered, the drive will commence writing the 512 bytes in memory
            at ES:R3 to the sector. Writing takes a duration of 1-101 ms.
            When the write is in progress, the 'drive busy' bit will be set.
            When the write is complete, the 'drive busy' will be cleared.
